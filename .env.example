# ManoMonitor Configuration
# Copy this file to .env and edit as needed

# =============================================================================
# Application Settings
# =============================================================================

# Host and port to bind to
MANOMONITOR_HOST=0.0.0.0
MANOMONITOR_PORT=8080

# Enable debug mode (shows detailed logs, enables hot reload)
MANOMONITOR_DEBUG=false

# Secret key for session security (generate a random string)
MANOMONITOR_SECRET_KEY=change-me-to-a-random-string

# =============================================================================
# WiFi Capture Settings
# =============================================================================

# WiFi interface to use for monitoring (must support monitor mode)
# Common names: wlan0, wlan1, wlp2s0
MANOMONITOR_WIFI_INTERFACE=wlan0

# Enable WiFi probe capture on startup
MANOMONITOR_CAPTURE_ENABLED=true

# =============================================================================
# Network Monitoring (ARP/DHCP)
# =============================================================================
# These methods detect devices that actually connect to your network,
# revealing their real MAC address (not randomized like probe requests).

# Enable ARP table monitoring
MANOMONITOR_ARP_MONITORING_ENABLED=true

# Seconds between ARP table scans (5-300)
MANOMONITOR_ARP_SCAN_INTERVAL=30

# Enable DHCP lease file monitoring
MANOMONITOR_DHCP_MONITORING_ENABLED=true

# Seconds between DHCP lease file checks (10-600)
MANOMONITOR_DHCP_CHECK_INTERVAL=60

# Path to DHCP lease file (auto-detected if empty)
# Common locations:
# - /var/lib/misc/dnsmasq.leases (dnsmasq/Pi-hole)
# - /var/lib/dhcp/dhcpd.leases (ISC DHCP)
# - /tmp/dhcp.leases (OpenWrt)
MANOMONITOR_DHCP_LEASE_FILE=

# =============================================================================
# Detection Settings
# =============================================================================

# Default signal strength threshold in dBm
# Higher values = device must be closer
# -40 = very close, -65 = moderate, -80 = far
MANOMONITOR_DEFAULT_SIGNAL_THRESHOLD=-65

# Minutes without detection before device is considered "away"
MANOMONITOR_PRESENCE_TIMEOUT_MINUTES=5

# Minutes to wait before sending another notification for same device
MANOMONITOR_NOTIFICATION_COOLDOWN_MINUTES=60

# Send notification when a new (unknown) device is first detected
MANOMONITOR_NOTIFY_NEW_DEVICES=false

# =============================================================================
# IFTTT Notifications
# =============================================================================

# Enable IFTTT webhook notifications
MANOMONITOR_IFTTT_ENABLED=false

# Your IFTTT Webhook key (from https://ifttt.com/maker_webhooks)
MANOMONITOR_IFTTT_WEBHOOK_KEY=

# IFTTT event name to trigger
MANOMONITOR_IFTTT_EVENT_NAME=manomonitor_detected

# =============================================================================
# Home Assistant Notifications
# =============================================================================

# Enable Home Assistant notifications
MANOMONITOR_HOMEASSISTANT_ENABLED=false

# Home Assistant base URL
MANOMONITOR_HOMEASSISTANT_URL=http://homeassistant.local:8123

# Home Assistant Long-Lived Access Token
# Generate at: Home Assistant → Profile → Long-Lived Access Tokens
MANOMONITOR_HOMEASSISTANT_TOKEN=

# Notification service to call (e.g., notify.notify, notify.mobile_app_phone)
MANOMONITOR_HOMEASSISTANT_NOTIFY_SERVICE=notify.notify

# =============================================================================
# MAC Address Vendor Lookup (Enhanced Device Identification)
# =============================================================================
# These optional API keys enable enhanced MAC address lookups with better
# manufacturer detection, device types, and country information.
# Free tier available for both services.

# macaddress.io API key (optional)
# Provides: manufacturer, country, device type, virtual machine detection
# Get a free API key at: https://macaddress.io/
# Free tier: 1,000 requests/month
MANOMONITOR_MACADDRESS_IO_API_KEY=

# maclookup.app API key (optional)
# Provides: manufacturer, country, block type (MA-L, MA-M, MA-S)
# Get a free API key at: https://maclookup.app/
# Free tier: 1,000 requests/day
MANOMONITOR_MACLOOKUP_APP_API_KEY=

# Days to cache vendor lookup results (reduces API usage)
MANOMONITOR_VENDOR_CACHE_DAYS=90

# =============================================================================
# Data Retention
# =============================================================================

# Days to keep detailed probe logs (0 = forever)
MANOMONITOR_LOG_RETENTION_DAYS=30

# =============================================================================
# Monitor Location & Map (Multi-Monitor Positioning)
# =============================================================================
# For accurate device positioning, you need 2+ monitors at known locations.
# Each monitor should have its own .env with unique location coordinates.

# Name for this monitor (e.g., "Living Room", "Garage")
MANOMONITOR_MONITOR_NAME=Primary

# Monitor location (leave as 0.0 to use auto-detection)
# Or manually set coordinates from any mapping service
# Example: 37.7749 (latitude), -122.4194 (longitude)
MANOMONITOR_MONITOR_LATITUDE=0.0
MANOMONITOR_MONITOR_LONGITUDE=0.0

# API key for multi-monitor sync (auto-generated if empty)
# Share this key with other monitors to enable cross-device tracking
MANOMONITOR_MONITOR_API_KEY=

# Enable the device location map feature
MANOMONITOR_MAP_ENABLED=true

# Signal-to-distance calibration (adjust for your environment)
# Reference signal at 1 meter (typical phone: -59, weak devices: -65)
MANOMONITOR_SIGNAL_TX_POWER=-59
# Path loss exponent (2=free space, 3=typical indoor, 4=obstructed)
MANOMONITOR_SIGNAL_PATH_LOSS=3.0

# Signal averaging window (number of readings to average, 1=disabled)
# Higher values = smoother but slower to update
MANOMONITOR_SIGNAL_AVERAGING_WINDOW=5

# =============================================================================
# Auto-Location Detection
# =============================================================================
# If monitor lat/long is not configured, ManoMonitor can auto-detect location.
# Priority: GPS dongle > WiFi geolocation > IP geolocation

# Enable automatic location detection on startup
MANOMONITOR_AUTO_DETECT_LOCATION=true

# GPS Device (USB GPS dongle, ~2-5m accuracy) - MOST ACCURATE
# Enable GPS detection (will auto-find devices like /dev/ttyACM0, /dev/ttyUSB0)
MANOMONITOR_GPS_ENABLED=true
# Specific GPS device path (leave empty for auto-detection)
# Common paths: /dev/ttyACM0, /dev/ttyUSB0, /dev/gps0
MANOMONITOR_GPS_DEVICE=

# Google Geolocation API key (optional, for WiFi-based location ~10-50m accuracy)
# Without this and without GPS, falls back to IP geolocation (~5km accuracy)
# Get a key at: https://console.cloud.google.com/apis/library/geolocation.googleapis.com
MANOMONITOR_GOOGLE_GEOLOCATION_API_KEY=

# =============================================================================
# Database (Advanced)
# =============================================================================

# Database connection string
# SQLite (default): sqlite+aiosqlite:///./data/manomonitor.db
# PostgreSQL: postgresql+asyncpg://user:password@localhost/manomonitor
MANOMONITOR_DATABASE_URL=sqlite+aiosqlite:///./data/manomonitor.db
